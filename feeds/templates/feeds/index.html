{% extends 'base.html' %}
{% block content %}
<h1>feed page</h1>
{% if user.is_authenticated %}
  <a href="/feeds/new">new feed</a>
{% endif %}
{% for feed in feeds %}
  <p>{{ feed.title }}</p>
  <p>{{ feed.content }}</p>
  {% for c in feed.feedcomment_set.all %}
   {{ c.content }}
    {% if request.user == c.author %}
      <form action="/feeds/{{ feed.id }}/comments/{{ c.id }}/" method="POST">
        {% csrf_token %}
        <button>댓글 삭제</button>
      </form>
    {% endif %}
  {% endfor %}
  <form action="/feeds/{{ feed.id }}/comments/" method="POST">
    {% csrf_token %}
    <input type="text" name="content" />
    <button type="submit">댓글 달기</button>
  </form>
  <a href="/feeds/{{ feed.id }}">더보기</a>
  {% if request.user == feed.author %}
    <a href="/feeds/{{ feed.id }}/update">수정</a>
    <a href="/feeds/{{ feed.id }}/delete"
       onclick="return confirm('정말 삭제하시겠습니까?')">
      삭제
    </a>
  {% endif %}
{% endfor %}
{% endblock %}
